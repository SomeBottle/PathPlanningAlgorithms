# PathPlanningAlgorithms

è¯¾ç¨‹ä½œä¸šã€‚  

ä¸»è¦æ˜¯æ¢å¯» A* è·¯å¾„è§„åˆ’ç®—æ³•ï¼Œå’±é™„å¸¦å®ç°äº†ä¸€ä¸‹ JPS ç‰ˆæœ¬çš„ A* ç®—æ³•ã€‚

* PSï¼šæ‰€æœ‰ä»£ç éƒ½æœ‰è¯¦ç»†æ³¨é‡Šã€‚

è¿˜åˆ«è¯´ï¼Œè·¯å¾„è§„åˆ’çœŸæŒºæœ‰è¶£å§~ (ã€‚ãƒ»âˆ€ãƒ»)ãƒ   

## ä¸€äº›ä¸ªäººå¿ƒå¾—

### æ¢³ç†ä¸€ä¸‹

Dijkstra ç®—æ³•æ¯æ¬¡è¿­ä»£ä¸­éƒ½ä¼šä»ç›®å‰**æœªç¡®å®šç»“ç‚¹ä¸­é€‰æ‹©è·¯å¾„æœ€çŸ­çš„ç»“ç‚¹**ä½œä¸ºä¸‹ä¸€ä¸ªè½è„šç‚¹ï¼Œç„¶åå†æ‰©å±•å…¶æ‰€æœ‰çš„å¯è¡Œé‚»å±…ç»“ç‚¹ã€‚è™½ç„¶ Dijkstra èƒ½**ä¿è¯æ‰¾åˆ°æœ€çŸ­è·¯**ï¼Œä½†æ˜¯å› ä¸ºå…¶æ‰©å±•çš„é€Ÿåº¦ç‰¹åˆ«æ…¢ï¼Œä¼šå‡åŒ€åœ°æ¢ç´¢å„ä¸ªè·¯å¾„ï¼Œå¯¹äºè§„æ¨¡å¾ˆå¤§çš„å›¾ï¼Œæ±‚è§£é€Ÿåº¦å®åœ¨æ˜¯ä»¤äººä¸æ•¢æ­ç»´ã€‚

* æ³¨æ„ï¼ŒDijkstra **è¦æ±‚è¾¹æƒéè´Ÿ**ã€‚

A* ç®—æ³•åˆ™æ˜¯åœ¨ Dijkstra çš„åŸºç¡€ä¸Šï¼ŒåŠ å…¥äº†å¯å‘å¼ä¿¡æ¯ï¼ˆè¿™ä¸ªä¿¡æ¯å°±æ˜¯â€œ**æ˜¯å¦æ²¿ç€è¿™ä¸ªæ–¹å‘æ›´æœ‰å¯èƒ½å¿«é€Ÿåˆ°è¾¾ç»ˆç‚¹**â€ï¼‰ï¼Œä½¿å¾—å…¶èƒ½å¤Ÿ**ä¼˜å…ˆæ‰©å±•æ›´æœ‰å¸Œæœ›çš„ç»“ç‚¹**ï¼Œä»è€Œ**åŠ é€Ÿæœç´¢è¿‡ç¨‹**ã€‚

* A* ç®—æ³•çš„æ€§èƒ½å› æ­¤ä¹Ÿå–å†³äºå¯å‘å¼ä¿¡æ¯çš„è®¡ç®—æ–¹å¼ï¼ˆ**ä¸ä¸€å®šèƒ½æ‰¾åˆ°æœ€ä¼˜è·¯çº¿**ï¼‰ï¼Œåœ¨éšœç¢ç‰©æ¯”è¾ƒå¤æ‚æ—¶å¯èƒ½æ€§èƒ½ä¸Šä¼šé€€åŒ–åˆ° Dijkstraã€‚  

Jump Point Search ä¼˜åŒ–çš„ A* ç®—æ³•åˆ™è¦å‰å®³å¤šäº†ï¼Œå…¶é€šè¿‡ä¸€äº›ç­–ç•¥å¤§å¹…å‡å°‘äº†**éœ€è¦æ‰©å±•çš„ç»“ç‚¹**æ•°é‡ï¼Œæ¯æ¬¡æ‰©å±•çš„ç»“ç‚¹ä¸ä¸€å®šæ˜¯é‚»å±…ï¼Œå¾ˆå¯èƒ½æ˜¯ä¸€ä¸ªâ€œè·³ç‚¹â€ã€‚

----

ğŸ’¡ ä»ä¸Šé¢ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥ï¼Œè·¯å¾„è§„åˆ’ç®—æ³•åœ¨æ€§èƒ½æ–¹é¢ä¸€ä¸ªå¾ˆé‡è¦çš„ç‚¹å°±æ˜¯â€”â€”**æ‰©å±•ç»“ç‚¹çš„ç­–ç•¥**ã€‚

* æ‰©å±•ç»“ç‚¹æ¢ä¸ªè¯´æ³•ï¼Œå…¶å®å°±æ˜¯ç¨‹åºè®¤ä¸º**å¯èƒ½å­˜åœ¨äºæœ€ä¼˜è·¯å¾„ä¸Šçš„ç»“ç‚¹**ã€‚ç¨‹åºä¼šä»è¿™äº›ç»“ç‚¹å‡ºå‘å¯»æ‰¾ä¸‹ä¸€ä¸ªå¯èƒ½çš„è½è„šç‚¹ã€‚
* å› æ­¤è¿­ä»£è¿‡ç¨‹ä¸­**éœ€è¦æ‰©å±•çš„ç»“ç‚¹è¶Šå°‘**ï¼Œéœ€è¦æ£€æŸ¥çš„ç»“ç‚¹å°±è¶Šå°‘ï¼Œç®—æ³•çš„å†…å­˜æ¶ˆè€—å°±è¶Šå°ï¼ŒåŒæ—¶ä¹Ÿèƒ½æ›´å¿«æ±‚è§£ã€‚

### JPS ç®—æ³•ç¢ç¢å¿µ

JPS ä¼˜åŒ–çš„ A* ç®—æ³•ä¸­æœ€é‡è¦çš„ä¸¤ä¸ªæ¦‚å¿µï¼š

1. å¼ºè¿«é‚»å±…
2. è·³ç‚¹

å…·ä½“æ¦‚å¿µçš„ä»‹ç»ä¸å¤šèµ˜è¿°ï¼Œå¯ä»¥è§å‚è€ƒæ–‡ç« ã€‚  

ä¸ªäººè®¤ä¸ºï¼Œè¦æ¸…æ™°åœ°å†™ä»£ç å®ç° JPS-A* ç®—æ³•ï¼Œå¿…é¡»è¦ææ¸…æ¥š JPS çš„æ ¸å¿ƒä¼˜åŒ–ç‚¹åœ¨å“ªé‡Œâ€”â€”  
â€”â€”æ²¡é”™ï¼Œå°±æ˜¯**å¯¹æ‰©å±•ç»“ç‚¹ç­–ç•¥**çš„ä¼˜åŒ–ï¼  

A* ç®—æ³•æ¯ä¸€æ¬¡è¿­ä»£åœ¨å–å‡ºä¸€ä¸ªè½è„šç‚¹åï¼Œéƒ½ä¼š**æ‰©å±•å…¶æ‰€æœ‰é‚»å±…ç»“ç‚¹**ï¼›JPS é¢å¤–å¤šäº†ä¸€äº›è®¡ç®—æ­¥éª¤ï¼Œæ‰¾åˆ°æ‰€è°“çš„â€œè·³ç‚¹â€ï¼Œ**æ‰©å±•çš„æ˜¯è·³ç‚¹è€Œä¸æ˜¯é‚»å±…**ï¼Œè€Œæ¯æ¬¡è¿­ä»£ä¸­æ‰¾åˆ°çš„è·³ç‚¹çš„æ•°é‡è¦æ˜æ˜¾å°‘å¾ˆå¤šï¼Œå› æ­¤æ±‚è§£é€Ÿåº¦æ˜æ˜¾å°±è¦é«˜å¾ˆå¤šã€‚  

ğŸ’¡ ç®€å•æ¥è¯´ï¼ŒJPS ç›¸æ¯” A* ç®—æ³•ï¼Œæ”¹åŠ¨çš„åœ°æ–¹å…¶å®å°±æ˜¯æ‰©å±•ç»“ç‚¹çš„éƒ¨åˆ†ï¼ˆæ¯”å¦‚åœ¨ A* ä¸­å°±æ˜¯å¯»æ‰¾é‚»å±…å¹¶åŠ å…¥ `open_list` è¿™éƒ¨åˆ†ï¼‰ã€‚

## å®¹æ˜“è¢«ç»•è¿›å»çš„åœ°æ–¹

ç®—æ³•å®ç°è¿‡ç¨‹ä¸­æœ€è®©æˆ‘è¿·æƒ‘çš„ä¸€ç‚¹ï¼šå¼ºåˆ¶é‚»å±…ï¼ˆForced Neighborï¼‰åˆ°åº•æ˜¯ä»€ä¹ˆä¸ªåœ°ä½ï¼Ÿ! åˆ°åº•è¦ä¸è¦æŠŠå¼ºåˆ¶é‚»å±…åŠ å…¥ `open_list` ï¼Ÿå¾ˆå¤šæ–‡ç« éƒ½æ²¡è®²æ¸…æ¥šæˆ–æ²¡å¼ºè°ƒè¿™ä¸€ç‚¹ã€‚

æŠ˜è…¾äº†å¥½ä¸€æ®µæ—¶é—´ï¼Œæ€»ç®—æŠŠ JPS ç®—æ³•å®ç°åï¼Œæˆ‘çš„ç­”æ¡ˆæ˜¯ï¼š  

* ä¸éœ€è¦åŠ å…¥ `open_list`ï¼ 

å¼ºåˆ¶é‚»å±…çš„ä½œç”¨ä¸»è¦æœ‰ä¸¤ä¸ªï¼š  

1. ç”¨äºåˆ¤å®šè·³ç‚¹ã€‚ï¼ˆè·³ç‚¹å‘¨å›´è‚¯å®šæœ‰å¼ºåˆ¶é‚»å±…ï¼‰
2. ç”¨äº**å¼•å¯¼æ‰©å±•ç»“ç‚¹**ã€‚

ç¬¬ 1 ç‚¹å¾ˆå¤šæ–‡ç« éƒ½å†™çš„å¾ˆæ˜ç¡®ï¼Œå°±ä¸å¤šèµ˜è¿°äº†ã€‚ä¸»è¦æ˜¯ç¬¬ 2 ç‚¹ã€‚

### å¼ºåˆ¶é‚»å±…æ˜¯æ€ä¹ˆå¼•å¯¼æ‰©å±•ç»“ç‚¹çš„ï¼Ÿ

æˆ‘è§‰å¾—æ•´ä¸ªè¿‡ç¨‹ä¸­æœ€è®©æˆ‘è¿·ç³Šçš„å¯èƒ½å°±æ˜¯è¿™ä¸ªåœ°æ–¹äº†ã€‚  

åœ¨ä» `open_list` å–å‡ºä¸€ä¸ªç»“ç‚¹åï¼Œåœ¨ A* ç®—æ³•ä¸­æœ‰ 8 ä¸ªé‚»å±…ï¼Œè¿™å…¶å®ä¹Ÿå¯ä»¥**çœ‹ä½œæ˜¯ 8 ä¸ªå¯»æ‰¾æ–¹å‘**ï¼Œä½†åœ¨ JPS ç®—æ³•ä¸­ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹æˆ‘ä»¬å¹¶ä¸éœ€è¦å‘æ‰€æœ‰ 8 ä¸ªæ–¹å‘è¿›è¡Œæœç´¢ã€‚

* è®¾ç»“ç‚¹ $x$ çš„çˆ¶ç»“ç‚¹æ˜¯ $parent(x)$ï¼Œæ‰€è°“çš„â€œæ–¹å‘â€å°±æ˜¯ $parent(x)$ æŒ‡å‘ $x$ çš„è¿™ä¸ªæ–¹å‘ã€‚

![8_directions](./assets/8_directions.png)  
> å›¾ä¸­æ ‡å‡ºæ¥äº† 8 ä¸ªâ€œé‚»å±…â€çš„ä½ç½®ï¼Œåœ¨ JPS ä¸­è¿™æ˜¯ 8 ä¸ªå¯»æ‰¾æ–¹å‘ã€‚  

* ä¸Šå›¾ä¸­æ˜¯ä¸€ä¸ªèµ·å§‹èŠ‚ç‚¹ï¼Œå…¶æ²¡æœ‰çˆ¶ç»“ç‚¹ï¼Œå› æ­¤éœ€è¦å‘ 8 ä¸ªæ–¹å‘å»æŸ¥æ‰¾è·³ç‚¹ï¼Œå°†è·³ç‚¹åŠ å…¥ `open_list`ã€‚  

ä¹Ÿå°±æ˜¯ä» `open_list` å–å‡ºçš„ç¬¬äºŒä¸ªç»“ç‚¹å¼€å§‹ï¼Œ**å°±å…¨éƒ½æ˜¯è·³ç‚¹äº†**ã€‚

> å½“ç„¶ï¼ŒæŠŠèµ·å§‹ç»“ç‚¹çœ‹ä½œè·³ç‚¹ä¹Ÿè¡Œã€‚

ä»ç¬¬äºŒä¸ªç»“ç‚¹å¼€å§‹å°±æœ‰çˆ¶ç»“ç‚¹äº†ï¼Œæœ‰çˆ¶ç»“ç‚¹çš„ç»“ç‚¹å°±æœ‰æ–¹å‘ã€‚è€Œæœ‰æ–¹å‘ï¼ŒJPS å°±èƒ½é¡ºç€æ–¹å‘æ‰¾è·³ç‚¹ï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼š  

1. **æ°´å¹³/ç«–ç›´æ–¹å‘**ã€‚

    ![move_horizontally](./assets/move_horizontally.png) ![move_horizontally_with_obstacle](./assets/move_horizontally_with_obstacle.png)  

    æ²¿ç€è¿™ä¸ªæ–¹å‘**ä¸€ç›´èµ°**ç›´åˆ°é‡åˆ°ç‰¹å®šçš„ï¼ˆè§å‚è€ƒæ–‡ç« ï¼‰éšœç¢ç‰©ï¼Œå°±æœ‰äº†å¼ºåˆ¶é‚»å±…ï¼ˆç´«è‰²ï¼‰ï¼Œä¹Ÿå°±æ‰¾åˆ°äº†è·³ç‚¹ã€‚

2. **å¯¹è§’æ–¹å‘**ã€‚

    ![move_diagonally](./assets/move_diagonally.png) ![move_diagonally_with_obstacle](./assets/move_diagonally_with_obstacle.png)  

    å…ˆæ²¿ç€æ°´å¹³å’Œç«–ç›´åˆ†é‡æ–¹å‘æŒ‰ 1 è¿›è¡Œï¼Œç„¶åå†æ²¿ç€å¯¹è§’çº¿æ–¹å‘ä¸€ç›´èµ°ç›´è‡³é‡åˆ°ç‰¹å®šçš„ï¼ˆè§å‚è€ƒæ–‡ç« ï¼‰éšœç¢ç‰©ï¼Œå°±æœ‰äº†å¼ºåˆ¶é‚»å±…ï¼ˆç´«è‰²ï¼‰ï¼Œå°±æ‰¾åˆ°äº†è·³ç‚¹ã€‚

> ç‰¹ä¾‹ï¼šç»ˆç‚¹æ²¡æœ‰å¼ºåˆ¶é‚»å±…ã€‚

æ³¨æ„ï¼Œè¿™é‡Œ**å¼ºåˆ¶é‚»å±…çš„ä½œç”¨**å°±æ¥äº†ï¼  

ä¸Šé¢**æ¯ä¸ªå³å›¾**ä¸­ç»¿è‰²çš„ç»“ç‚¹è‚¯å®šæ˜¯ä» `open_list` ä¸­å–å‡ºçš„è·³ç‚¹ï¼Œå› ä¸ºå…¶æœ‰å¼ºåˆ¶é‚»å±…ï¼ˆç´«è‰²æ–¹å—ï¼‰ï¼š

1. å¯¹äº 1 ä¸­çš„æƒ…å†µï¼ŒåŸæœ¬æˆ‘ä»¬æ‰¾è·³ç‚¹çš„æ–¹å‘æ˜¯ä¸€ç›´å‘å³ï¼Œ**å‡ºç°å¼ºåˆ¶é‚»å±…åï¼Œæ–°å¢äº†ä¸€ä¸ªæŒ‡å‘å¼ºåˆ¶é‚»å±…çš„å¯»æ‰¾æ–¹å‘**ã€‚  

2. å¯¹äº 2 ä¸­çš„æƒ…å†µï¼ŒåŸæœ¬æ‰¾è·³ç‚¹çš„æ–¹å‘æ˜¯ä¸¤ä¸ªåˆ†é‡å’Œä¸€ä¸ªå¯¹è§’æ–¹å‘ï¼Œ**å‡ºç°å¼ºåˆ¶é‚»å±…åï¼Œæ–°å¢äº†ä¸€ä¸ªå¼ºåˆ¶é‚»å±…çš„å¯»æ‰¾æ–¹å‘**ã€‚  

ğŸ’¡ å› æ­¤æ¯æ¬¡å–å‡ºè·³ç‚¹åçš„æµç¨‹å¦‚ä¸‹ï¼š

1. è®¡ç®—è¿™ä¸ªè·³ç‚¹ $x$ çš„æ–¹å‘ï¼ˆ$parent(x)$ æŒ‡å‘ $x$ çš„è¿™ä¸ªæ–¹å‘ï¼‰ã€‚
2. å¦‚æœæ˜¯æ°´å¹³/ç«–ç›´æ–¹å‘ï¼Œåˆ™æœ‰ä¸€ä¸ªå¯»æ‰¾æ–¹å‘ï¼›å¦‚æœæ˜¯å¯¹è§’æ–¹å‘ï¼Œåˆ™æœ‰ä¸‰ä¸ªå¯»æ‰¾æ–¹å‘ï¼ˆè§å‚è€ƒæ–‡ç« ï¼‰ã€‚  
3. æ‰«æä¸€åœˆæ£€æŸ¥æœ‰å‡ ä¸ªå¼ºåˆ¶é‚»å±…ï¼Œæ¯æ‰¾åˆ°ä¸€ä¸ªå¼ºåˆ¶é‚»å±…ï¼Œå°±åŠ ä¸Šä¸€ä¸ªå¯»æ‰¾æ–¹å‘ã€‚  

    * æ¯ä¸ªç»“ç‚¹æœ€å¤šåªæœ‰ä¸¤ä¸ªå¼ºåˆ¶é‚»å±…ï¼Œæ¯”å¦‚ä¸‹é¢è¿™å¼ å›¾ï¼š

        ![two obstacles](./assets/two_obstacles.png)  

        > è¿™é‡Œå°±æœ‰ $1+2=3$ ä¸ªæ‰¾è·³ç‚¹çš„æ–¹å‘ã€‚  

4. æ²¿ç€è¿™äº›æ–¹å‘å»å¯»æ‰¾è·³ç‚¹ï¼Œå¹¶åŠ å…¥ `open_list`ï¼Œå†è¿›å…¥ä¸‹ä¸€æ¬¡è¿­ä»£ã€‚  


æ‰€ä»¥è¯´å¼ºåˆ¶é‚»å±…çš„æœ‰å¼•å¯¼è·³ç‚¹æŸ¥æ‰¾çš„åŠŸèƒ½ï¼Œè€Œ JPS æ‰©å±•çš„æ˜¯è·³ç‚¹ï¼Œå› æ­¤å¼ºåˆ¶é‚»å±…å…¶å®å°±æ˜¯åœ¨å¼•å¯¼ç»“ç‚¹çš„æ‰©å±•ã€‚

## ç›®å½•ç»“æ„

```bash
src
â”œâ”€â”€ algorithms # ç®—æ³•å®ç°
â”‚Â Â  â”œâ”€â”€ __init__.py
â”‚Â Â  â”œâ”€â”€ a_star.py # A* ç®—æ³•
â”‚Â Â  â”œâ”€â”€ a_star_jps.py # A* ç®—æ³• Jump Point Search ç‰ˆ
â”‚Â Â  â”œâ”€â”€ algorithm_base.py # ç®—æ³•åŸºç±»
â”‚Â Â  â”œâ”€â”€ states.py # ç®—æ³•çŠ¶æ€æšä¸¾é‡
â”‚Â Â  â””â”€â”€ utils.py # å·¥å…·ç±»ï¼Œä¸»è¦æ˜¯æ–¹å‘ Direction ç›¸å…³çš„ç±»
â”œâ”€â”€ exceptions
â”‚Â Â  â””â”€â”€ __init__.py # ä¸€äº›è‡ªå®šä¹‰å¼‚å¸¸
â”œâ”€â”€ main.py # ä¸»ç±»
â”œâ”€â”€ problems
â”‚Â Â  â”œâ”€â”€ __init__.py
â”‚Â Â  â”œâ”€â”€ cell_status.py # å›¾ä¸­æ¯ä¸ªæ ¼å­çŠ¶æ€çš„æšä¸¾é‡
â”‚Â Â  â”œâ”€â”€ drawer.py # é—®é¢˜ç»˜åˆ¶æ¨¡å—
â”‚Â Â  â”œâ”€â”€ generator.py # éšæœºé—®é¢˜ç”Ÿæˆ
â”‚Â Â  â”œâ”€â”€ problem.py # é—®é¢˜ç±»ï¼Œç”¨äºè¡¨ç¤ºæ¯ä¸ªäºŒç»´æ …æ ¼å›¾
â”‚Â Â  â””â”€â”€ utils.py # å·¥å…·æ–¹æ³•
â”œâ”€â”€ test.py
â”œâ”€â”€ tree.txt
â””â”€â”€ visualization
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ algo_animator.py
    â”œâ”€â”€ problem_visualizer.py
    â”œâ”€â”€ result_visualizer.py
    â””â”€â”€ utils.py
```

## å‚è€ƒæ–‡çŒ®

* Harabor D, Grastien A. Online graph pruning for pathfinding on grid maps[C]//Proceedings of the AAAI conference on artificial intelligence. 2011, 25(1): 1114-1119.
* DuchoÅˆ F, Babinec A, Kajan M, et al. Path planning with modified a star algorithm for a mobile robot[J]. Procedia engineering, 2014, 96: 59-69.  
* Harabor D. Fast pathfinding via symmetry breaking[J]. Aigamedev Com, 2012.
* https://zerowidth.com/2013/a-visual-explanation-of-jump-point-search/  
* https://hakuya.me/algorithm/findpath/JPS%E7%AE%97%E6%B3%95%E5%88%86%E4%BA%AB/